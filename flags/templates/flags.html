%rebase('layout', title='Flags', parent_url=app.get_url('index'))

<h1>Application: {{application}} - READ ONLY</h1>

{{default}} except if stated otherwise. <br/><br/>


%for flag in flags:
<div title="{{flags[flag]}}"><strong>{{flag}}</strong></div>

<form method="POST" action="{{app.get_url('flags', application=application)}}">


<input type="checkbox" data-toggle="switch" id="{{flag}}" {{"checked" if flags[flag]["enabled"] else ""}} {{"disabled" if flags[flag]["for_all"] else ""}} />

<label class="checkbox" for="toall_{{flag}}">
    <input type="checkbox" value="" id="toall_{{flag}}" data-toggle="checkbox" {{"checked" if flags[flag]["for_all"] else ""}}>for all</label>
</label><br/>

Segmentation:
<table border=".5" >
%if flags[flag].get("segmentation", None):
%segmentation = flags[flag].get("segmentation")
%for segment in segmentation:
  <tr>
    <th>{{segment}}
    <input type="checkbox" data-toggle="switch" id="{{flag}}_{{segment}}" {{"checked" if segmentation[segment]["enabled"] else ""}} {{"disabled" if segmentation[segment]["for_all"] else ""}} />

    <label class="checkbox" for="toall_{{flag}}_{{segment}}">
        <input type="checkbox" value="" id="toall_{{flag}}" data-toggle="checkbox" {{"checked" if segmentation[segment]["for_all"] else ""}}>for all</label>
    </label>
    </th>

%if segmentation[segment].get("options", None):
%options = segmentation[segment].get("options")
%for option in options:
    <td>{{option}}
    <input type="checkbox" data-toggle="switch" id="{{flag}}_{{segment}}" {{"checked" if options[option] else ""}} /></td>
%end
%end
  </tr>
%end
%end
</table>
<hr>
%end

<input type="submit" value="Save" />
</form>

